/* Global box-sizing reset */
*, *::before, *::after { box-sizing: border-box; }

/* ===== Global item row layout ===== */
.item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  direction: rtl;
  padding: 0.4rem 0.5rem;
  box-sizing: border-box;
}

/* Icon (fixed) */
.item .icon {
  flex: 0 0 auto;
  width: 2rem;
  text-align: center;
  font-size: 1.05rem;
}

/* Name: flexible, ellipsis, readable */
.item .name {
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
  color: #222;
}

/* Quantity: fixed width, logical alignment (RTL-aware) */
.item .qty {
  flex: 0 0 auto;
  min-width: 4.2rem;
  text-align: end;
  font-size: 0.95rem;
  color: #444;
}

/* Price: compact, flexible width, currency left and amount right (LTR box) */
.item .price {
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.18rem;
  flex: 0 1 5.2rem;
  margin-left: auto;    /* pushes price to visual left inside RTL row */
  text-align: left;
  font-weight: 700;
  color: #1b7a2b;
  cursor: pointer;
  direction: ltr;       /* stable LTR layout; amount right, currency left */
}

/* Amount and currency inside price */
.item .price .currency { order: 0; font-size: 0.9rem; opacity: 0.95; }
.item .price .amount { order: 1; font-size: 0.98rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Hide legacy edit button if present */
.btn-edit-price { display: none !important; }

/* ===== Buttons: restore readable size and style ===== */
.btn-action {
  padding: 0.45rem 0.9rem;
  font-size: 0.98rem;
  border-radius: 8px;
  background: #2b7a2b;
  color: #fff;
  border: none;
  cursor: pointer;
  box-shadow: 0 1px 0 rgba(0,0,0,0.06);
}
.btn-action:active { transform: translateY(1px); }

/* Generic button class for reuse */
.btn { padding: 0.45rem 0.9rem; font-size: 0.98rem; border-radius: 8px; }

/* Accessible focus styles */
.btn-action:focus-visible,
.controls button:focus-visible,
.item .price:focus-visible {
  outline: 2px solid #2b7a2b;
  outline-offset: 2px;
  border-radius: 8px;
}

/* If buttons use other selectors in the app, try these fallbacks */
button#btnClearList, button#btnClearChecked, .controls .btn {
  padding: 0.45rem 0.9rem;
  font-size: 0.98rem;
  border-radius: 8px;
}

/* ===== List footer / total ===== */
.list-footer {
  margin-top: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: flex-end;
  direction: rtl;
}
.total-row {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  font-weight: 700;
}
.total-label { color: #333; font-size: 0.95rem; }
.total-amount {
  color: #1b7a2b;
  font-size: 1rem;
  min-width: 4.5rem;
  text-align: left;
  direction: ltr; /* numeric LTR for stable digit grouping */
}

/* ===== Dark mode improvements (contrast + readability) ===== */
body.dark-mode {
  --bg: #0f1115;
  --panel: #111317;
  --muted: #b4b6b8;
  --text: #ececec;
  --btn-bg: #265f26;      /* darker for better contrast */
  --btn-text: #ffffff;
  --panel-border: rgba(255,255,255,0.04);
}
body.dark-mode .item { background: transparent; }
body.dark-mode .item .name {
  color: #f5f5f5;
  text-shadow: 0 1px 0 rgba(0,0,0,0.25);
  font-weight: 600;
}
body.dark-mode .item .qty { color: var(--muted); }
body.dark-mode .item .price { color: #b6f0c9; }
body.dark-mode .list-footer .total-label { color: #eeeeee; font-weight: 600; }
body.dark-mode .list-footer .total-amount { color: #fff; text-shadow: 0 1px 0 rgba(0,0,0,0.28); }

/* Stronger contrast for action button in dark mode */
body.dark-mode .btn-action { background: var(--btn-bg); color: var(--btn-text); border: 1px solid var(--panel-border); }

/* ===== Responsive tweaks ===== */
@media (max-width: 480px) {
  .item { gap: 0.35rem; padding: 0.35rem; }
  .item .icon { width: 1.8rem; font-size: 0.98rem; }
  .item .name { font-size: 0.96rem; }
  .item .qty { min-width: 3.4rem; font-size: 0.88rem; }
  .item .price { flex: 0 1 4.2rem; font-size: 0.96rem; gap: 0.14rem; }
  .item .price .currency { font-size: 0.88rem; }
  .total-amount { min-width: 3.6rem; font-size: 0.96rem; }
  .btn-action { padding: 0.36rem 0.7rem; font-size: 0.92rem; border-radius: 7px; }
}

/* ===== Optional: force price visibility when toggle on/off conflict occurs ===== */
/* Use this if price elements are unexpectedly hidden by other rules */
#listGrid .item .price { display: inline-flex; }


/* ==========================================================
   Opened Menu UI â€” #settingsSection / #categoriesList
   ========================================================== */

/* Design tokens for menus */
:root {
  --menu-bg: #ffffff;
  --menu-border: #e9ecef;
  --menu-radius: 12px;
  --menu-shadow: 0 10px 30px rgba(0,0,0,0.12);
  --menu-item-hover: rgba(43,122,43,0.08);
  --menu-item-active: rgba(43,122,43,0.14);
  --menu-text: #222;
  --menu-subtext: #666;
  --menu-divider: #f1f3f5;
}

/* Base panel (closed/open share transitions) */
#settingsSection,
#categoriesList {
  background: var(--menu-bg);
  border: 1px solid var(--menu-border);
  border-radius: var(--menu-radius);
  box-shadow: var(--menu-shadow);
  padding: 0.6rem;
  transform-origin: top center;
  transition: opacity 140ms ease, transform 140ms ease, box-shadow 140ms ease;
  max-height: min(70vh, 520px);
  overflow: auto;
}

/* Open state animation */
#settingsSection.open,
#categoriesList.open {
  animation: dropdownIn 140ms cubic-bezier(.2,.7,.3,1) both;
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

@keyframes dropdownIn {
  from { opacity: 0; transform: translateY(-6px) scale(0.98); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

@media (prefers-reduced-motion: reduce) {
  #settingsSection, #categoriesList { transition: none; }
  #settingsSection.open, #categoriesList.open { animation: none; }
}

/* Header inside menu (optional) */
#settingsSection .menu-header,
#categoriesList .menu-header,
#settingsSection .section-title {
  font-weight: 700;
  color: var(--menu-text);
  font-size: 0.98rem;
  margin: 0.2rem 0 0.4rem;
}

/* List layout inside menu */
#settingsSection ul,
#categoriesList ul { list-style: none; margin: 0; padding: 0; }

/* Items inside the menu */
#settingsSection li,
#categoriesList li,
#settingsSection .menu-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.45rem 0.55rem;
  border-radius: 8px;
  color: var(--menu-text);
  line-height: 1.3;
  cursor: default;
}

/* Clickable items (if they are buttons/links) */
#settingsSection li[role="button"],
#categoriesList li[role="button"],
#settingsSection .menu-item[role="button"],
#settingsSection li button,
#categoriesList li button,
#settingsSection li a,
#categoriesList li a { cursor: pointer; }

/* Hover/active/focus states */
#settingsSection li:hover,
#categoriesList li:hover,
#settingsSection .menu-item:hover { background: var(--menu-item-hover); }

#settingsSection li.is-active,
#categoriesList li.is-active,
#settingsSection .menu-item.is-active { background: var(--menu-item-active); }

#settingsSection li:focus-visible,
#categoriesList li:focus-visible,
#settingsSection .menu-item:focus-visible {
  outline: 2px solid #2b7a2b;
  outline-offset: 2px;
}

/* Subtext/description inside item */
#settingsSection li .desc,
#categoriesList li .desc { color: var(--menu-subtext); font-size: 0.86rem; }

/* Optional divider */
#settingsSection .menu-separator,
#categoriesList .menu-separator { height: 1px; background: var(--menu-divider); margin: 0.35rem 0; }

/* Icon sizes inside menu */
#settingsSection li .icon,
#categoriesList li .icon,
#settingsSection .menu-item .icon {
  width: 1.15rem;
  height: 1.15rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  opacity: 0.9;
}

/* Scrollbar styling */
#settingsSection::-webkit-scrollbar,
#categoriesList::-webkit-scrollbar { width: 10px; }
#settingsSection::-webkit-scrollbar-thumb,
#categoriesList::-webkit-scrollbar-thumb {
  background: var(--menu-divider);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
#settingsSection::-webkit-scrollbar-thumb:hover,
#categoriesList::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.22); }
body.dark-mode #settingsSection::-webkit-scrollbar-thumb:hover,
body.dark-mode #categoriesList::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.28); }

/* Toggle button state (if using aria-expanded) */
.btn-toggle-categories[aria-expanded="true"] {
  background: rgba(43,122,43,0.08);
  border-color: rgba(43,122,43,0.22);
}

/* Optional overlay (if present in markup) */
.menu-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.06);
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 160ms ease;
}
.menu-overlay.open { opacity: 1; pointer-events: auto; }
body.dark-mode .menu-overlay { background: rgba(0,0,0,0.35); }

/* ===== Dark mode for menu tokens ===== */
body.dark-mode {
  --menu-bg: rgba(255,255,255,0.04);
  --menu-border: rgba(255,255,255,0.08);
  --menu-shadow: 0 10px 30px rgba(0,0,0,0.45);
  --menu-item-hover: rgba(255,255,255,0.06);
  --menu-item-active: rgba(255,255,255,0.12);
  --menu-text: #ececec;
  --menu-subtext: #bdbfc1;
  --menu-divider: rgba(255,255,255,0.08);
}
